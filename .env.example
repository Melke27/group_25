# MongoDB Configuration Template
# Copy this file to .env and fill in your actual values
# Never commit the .env file to version control!

# ================================
# MONGODB ATLAS CONFIGURATION
# ================================

# MongoDB Atlas connection string
# Format: mongodb+srv://<username>:<password>@<cluster-url>/<database>?retryWrites=true&w=majority
MONGODB_URI=mongodb+srv://your_username:your_password@cluster0.abc123.mongodb.net/your_database?retryWrites=true&w=majority

# Database name (if not specified in URI)
MONGODB_DB_NAME=your_database_name

# ================================
# SELF-HOSTED MONGODB CONFIGURATION
# ================================

# For self-hosted MongoDB (uncomment if using)
# MONGODB_URI=mongodb://username:password@localhost:27017/database_name
# MONGODB_URI=mongodb://username:password@your_server_ip:27017/database_name

# For replica set (uncomment if using)
# MONGODB_URI=mongodb://username:password@host1:27017,host2:27017,host3:27017/database_name?replicaSet=rs0

# ================================
# GOOGLE CLOUD PLATFORM CONFIGURATION
# ================================

# GCP Project ID
GOOGLE_CLOUD_PROJECT_ID=your-gcp-project-id

# Path to service account key file (for local development)
GOOGLE_APPLICATION_CREDENTIALS=./path/to/service-account-key.json

# GCP MongoDB Compute Engine instance
# GCP_MONGODB_HOST=your-vm-internal-ip
# GCP_MONGODB_PORT=27017

# ================================
# APPLICATION CONFIGURATION
# ================================

# Application environment
NODE_ENV=development
# NODE_ENV=production

# Application port
PORT=3000

# API keys and secrets
# API_SECRET=your_api_secret_key
# JWT_SECRET=your_jwt_secret_key

# ================================
# MONGODB CONNECTION OPTIONS
# ================================

# Connection pool settings
MONGODB_MAX_POOL_SIZE=10
MONGODB_SERVER_SELECTION_TIMEOUT=5000
MONGODB_SOCKET_TIMEOUT=45000

# Retry settings
MONGODB_RETRY_WRITES=true
MONGODB_RETRY_READS=true

# ================================
# SECURITY CONFIGURATION
# ================================

# SSL/TLS settings
MONGODB_SSL=true
MONGODB_SSL_VALIDATE=true

# Authentication database
MONGODB_AUTH_SOURCE=admin

# ================================
# LOGGING AND MONITORING
# ================================

# Log level (error, warn, info, debug)
LOG_LEVEL=info

# Enable MongoDB query logging
MONGODB_LOGGING=false

# ================================
# BACKUP CONFIGURATION
# ================================

# Google Cloud Storage bucket for backups
# GCS_BACKUP_BUCKET=your-backup-bucket

# Backup schedule (cron format)
# BACKUP_SCHEDULE=0 2 * * *

# ================================
# TESTING CONFIGURATION
# ================================

# Test database URI (should be separate from production)
MONGODB_TEST_URI=mongodb+srv://test_user:test_password@test-cluster.mongodb.net/test_database?retryWrites=true&w=majority

# Test database name
MONGODB_TEST_DB_NAME=test_database

# ================================
# DEVELOPMENT TOOLS
# ================================

# Enable debug mode
DEBUG=false

# Enable MongoDB profiling
MONGODB_PROFILING=false
MONGODB_SLOW_QUERY_THRESHOLD=100

# ================================
# ADDITIONAL SERVICES
# ================================

# Redis configuration (if using with MongoDB)
# REDIS_URI=redis://localhost:6379

# Email service configuration
# EMAIL_SERVICE=gmail
# EMAIL_USER=your_email@gmail.com
# EMAIL_PASSWORD=your_email_password

# ================================
# EXAMPLE CONFIGURATIONS
# ================================

# Example 1: MongoDB Atlas (Free Tier M0)
# MONGODB_URI=mongodb+srv://myuser:mypassword@cluster0-free.abc123.mongodb.net/myapp?retryWrites=true&w=majority

# Example 2: MongoDB Atlas (Dedicated Cluster)
# MONGODB_URI=mongodb+srv://produser:securepassword@production-cluster.xyz789.mongodb.net/production_db?retryWrites=true&w=majority&ssl=true

# Example 3: Self-hosted MongoDB with authentication
# MONGODB_URI=mongodb://admin:password@localhost:27017/myapp?authSource=admin

# Example 4: GCP Compute Engine MongoDB
# MONGODB_URI=mongodb://mongouser:mongopass@10.128.0.2:27017/myapp?authSource=admin

# Example 5: MongoDB replica set
# MONGODB_URI=mongodb://user:pass@mongo1.example.com:27017,mongo2.example.com:27017,mongo3.example.com:27017/myapp?replicaSet=rs0&authSource=admin

# ================================
# SECURITY NOTES
# ================================

# 1. Never commit this file with real credentials to version control
# 2. Use strong, unique passwords for all accounts
# 3. Rotate credentials regularly
# 4. Use environment-specific configurations
# 5. Limit database user permissions to minimum required
# 6. Enable IP whitelisting in MongoDB Atlas
# 7. Use SSL/TLS encryption for all connections
# 8. Consider using secrets management services in production

# ================================
# TROUBLESHOOTING
# ================================

# If you encounter connection issues:
# 1. Verify the connection string format
# 2. Check network connectivity
# 3. Confirm credentials are correct
# 4. Ensure IP address is whitelisted (for Atlas)
# 5. Check firewall settings
# 6. Verify MongoDB server is running
# 7. Test with MongoDB Compass or mongosh

# For additional help, refer to:
# - MongoDB-Atlas-Guide.md
# - GCP-MongoDB-Guide.md
# - test-mongodb-connection.js
